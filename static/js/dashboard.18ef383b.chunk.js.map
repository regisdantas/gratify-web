{"version":3,"file":"static/js/dashboard.18ef383b.chunk.js","mappings":"8PAOaA,GALQC,EAAAA,GAAAA,GAAH,+DAKWA,EAAAA,GAAAA,IAAH,urD,UCPbC,EAAe,SAACC,GAC3B,IACEC,KAAKC,MAAMF,EAGZ,CAFC,MAAOG,GACP,OAAO,CACR,CACD,OAAO,CACR,E,mBCMKC,EAAiB,CACrBC,KAAM,SACNC,KAAM,GACNC,MAAO,MACPC,OAAO,GAkET,EA/DmC,SAAC,GAMjB,IALjBC,EAKgB,EALhBA,GACAC,EAIgB,EAJhBA,OACAC,EAGgB,EAHhBA,QACAC,EAEgB,EAFhBA,aACAC,EACgB,EADhBA,gBAEMC,EAAUC,EAAAA,OAA8B,MAExCC,EAAajB,EAAaY,GAC5BV,KAAKC,MAAMS,IADI,kBAEVP,GAFU,IAEME,KAAMK,IAC/B,OACE,SAACd,EAAD,CAAwBU,MAAOS,EAAWT,MAA1C,UACE,iBAAKU,UAAU,mBAAf,WACE,+BACE,8BACGD,EAAWR,OACV,SAAC,MAAD,CAAaU,KAAM,MAEnB,SAAC,MAAD,CAAUA,KAAM,MAGlB,oBACEC,MAAOH,EAAWX,KAClBe,SAAU,SAACjB,GAAD,OACRU,EACEJ,EACAR,KAAKoB,WAAL,kBAAoBL,GAApB,IAAgCX,KAAMF,EAAEmB,OAAOH,SAHzC,EAFZ,WASE,mBAAQA,MAAM,OAAd,mBACA,mBAAQA,MAAM,YAAd,wBACA,mBAAQA,MAAM,UAAd,yBAEF,8BACGT,EADH,KACaD,SAIf,SAAC,MAAD,CAAUc,QAAS,SAACpB,GAAD,OAAOS,EAAaH,EAApB,QAErB,iBACEe,IAAKV,EACLW,KAAK,UACLC,iBAAe,EACf,mBAAiB,8BACjBC,OAAQ,SAACxB,GAAD,OACNU,EACEJ,EACAR,KAAKoB,WAAL,kBAAoBL,GAApB,IAAgCV,KAAMH,EAAEmB,OAAOM,aAH3C,EAMRC,gCAAgC,EAXlC,SAaGb,EAAWV,WA3CEG,EAgDvB,E,mBC/EYqB,EAAYhC,EAAAA,GAAAA,IAAH,6D,8BCsItB,EA1G4B,WAC1B,MAA8BiB,EAAAA,SAAyB,IAAvD,eAAOgB,EAAP,KAAgBC,EAAhB,KACQC,GAASC,EAAAA,EAAAA,KAATD,KAEFE,GAAe,IAAIC,MAAOC,cAAcC,MAAM,KAAK,GACzD,EAA8BvB,EAAAA,UAAwB,GAAtD,eAAOwB,EAAP,UALgC,8CAOhC,WAAiCC,GAAjC,yFACQC,EAAmB,CACvBC,IAAKT,EAAKS,IACVjC,GAAIkC,MACJhC,QAAS,GACTiC,KAAMT,GAEFU,EAPR,kBAOyBd,GAPzB,CAOkCU,IAChCT,EAAWa,GACLC,GAAaC,EAAAA,EAAAA,IAAIC,EAAAA,GAAU,QAASf,EAAKS,KACzCO,GAAaC,EAAAA,EAAAA,IAAWJ,EAAY,WAV5C,UAWQK,EAAAA,EAAAA,IAAOF,EAAYR,GAX3B,4CAPgC,oEAqBhC,sGACQK,GAAaC,EAAAA,EAAAA,IAAIC,EAAAA,GAAU,QAASf,EAAKS,KACzCO,GAAaC,EAAAA,EAAAA,IAAWJ,EAAY,WAF5C,UAG8BM,EAAAA,EAAAA,IAAQH,GAHtC,OAGQI,EAHR,OAIQtB,EAAoB,GAC1BsB,EAAcC,SAAQ,SAACP,GACrBhB,EAAQwB,KAAKR,EAAIS,OAClB,IACDxB,EAAWD,GARb,2CArBgC,wBAgChChB,EAAAA,WAAgB,YAhCgB,mCAiC9B0C,EACD,GAAE,IAEH,IAAMC,EAAiB,yCAAG,WAAOjD,GAAP,yFAClBoC,EAAad,EAAQ4B,QAAO,SAACC,GAAD,OAAWA,EAAMnD,KAAOA,CAAxB,IAClCuB,EAAWa,GAELC,GAAaC,EAAAA,EAAAA,IAAIC,EAAAA,GAAU,QAASf,EAAKS,KACzCO,GAAaC,EAAAA,EAAAA,IAAWJ,EAAY,WACpCe,GAAYC,EAAAA,EAAAA,IAAMb,GAAYc,EAAAA,EAAAA,IAAM,KAAM,KAAMtD,IAN9B,UAOI2C,EAAAA,EAAAA,IAAQS,GAPZ,cAQVP,SAAQ,SAACU,IACrBC,EAAAA,EAAAA,KAAUlB,EAAAA,EAAAA,IAAIC,EAAAA,GAAD,gBAAoBf,EAAKS,IAAzB,YAAwCsB,EAASvD,IAC/D,IAVuB,2CAAH,sDAajByD,EAAiB,yCAAG,WAAOzD,EAAYE,GAAnB,uFAClBkC,EAAad,EAAQoC,KAAI,SAACP,GAI9B,OAHIA,EAAMnD,KAAOA,IACfmD,EAAMjD,QAAUA,GAEXiD,CACR,IACD5B,EAAWa,KAELuB,EAAerC,EAAQsC,MAAK,SAACT,GAAD,OAAWA,EAAMnD,KAAOA,CAAxB,KATV,wBAWtB2D,EAAazD,QAAUA,EACjBmC,GAAaC,EAAAA,EAAAA,IAAIC,EAAAA,GAAU,QAASf,EAAKS,KACzCO,GAAaC,EAAAA,EAAAA,IAAWJ,EAAY,WACpCe,GAAYC,EAAAA,EAAAA,IAAMb,GAAYc,EAAAA,EAAAA,IAAM,KAAM,KAAMtD,IAdhC,WAeM2C,EAAAA,EAAAA,IAAQS,GAfd,eAgBRP,SAAQ,SAACU,IACrBM,EAAAA,EAAAA,KACEvB,EAAAA,EAAAA,IAAIC,EAAAA,GAAD,gBAAoBf,EAAKS,IAAzB,YAAwCsB,EAASvD,IACpD2D,EAEH,IArBqB,4CAAH,wDAyBnBG,EAAQ,EACZ,OACE,SAAC,KAAD,WACE,UAAC,KAAD,YACE,SAACzC,EAAD,UACGC,EAAQoC,KAAI,SAACP,EAAOY,GAEnB,OADAC,QAAQC,IAAId,GACLrB,GACLqB,EAAMhB,OAAST,GACdpC,EAAa6D,EAAMjD,WACkB,IAApCV,KAAKC,MAAM0D,EAAMjD,SAASH,OAC5B,SAAC,EAAD,CAEEC,GAAImD,EAAMnD,GACVC,OAAS6D,GAAgB,EACzB5D,QAASiD,EAAMjD,QACfC,aAAc8C,EACd7C,gBAAiBqD,GALZN,EAAMnD,KAQb,kBAAUmD,EAAMnD,GAEnB,OAEH,SAAC,KAAD,CAAcF,MAAM,UAAUgB,QAlGJ,4CAkG1B,yBAMP,C","sources":["components/Card/styles.ts","utils.ts","components/Card/index.tsx","pages/Dashboard/styles.ts","pages/Dashboard/index.tsx"],"sourcesContent":["import styled from \"styled-components\";\n\nexport const Title = styled.h1`\n  font-size: 36px;\n  color: #3a3a3a;\n`;\n\nexport const CardContainer = styled.div`\n  /* max-width: 400px; */\n  width: 100%;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  padding: 0px;\n  margin: 10px 0px 0px 0px;\n\n  background-color: #eee;\n  border-radius: 5px;\n  border-left: 3px dashed lightgray;\n\n  div {\n    margin-left: 10px;\n    width: 100%;\n  }\n\n  .ContentContainer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    width: 100%;\n    border-radius: 5px 5px 0px 0px;\n    margin: 0;\n    background: #fff;\n\n    header {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n\n      svg {\n        margin: 10px;\n        cursor: pointer;\n      }\n    }\n\n    span {\n      display: flex;\n      padding: 0;\n      margin: 0;\n      gap: 5px;\n      align-items: center;\n    }\n    input,\n    select {\n      width: fit-content;\n      margin: 0px;\n      height: 30px;\n      color: black;\n      border: none;\n    }\n\n    strong {\n      color: darkgray;\n      width: 100%;\n      display: flex;\n      gap: 10px;\n      align-items: center;\n    }\n\n    span {\n      border: 0px;\n      padding: 10px;\n      width: 100%;\n      text-align: justify;\n    }\n\n    span:empty::before {\n      content: attr(data-placeholder);\n      color: lightgray;\n    }\n\n    span:focus {\n      outline: none;\n    }\n\n    .ActionContainer {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-around;\n      margin: 4px;\n      p {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        * {\n          margin-right: 5px;\n        }\n      }\n    }\n  }\n`;\n","export const isJsonString = (myString: string) => {\n  try {\n    JSON.parse(myString);\n  } catch (e) {\n    return false;\n  }\n  return true;\n};\n","import React from \"react\";\nimport { CardContainer } from \"./styles\";\nimport { FiTrash2 } from \"react-icons/fi\";\nimport { isJsonString } from \"../../utils\";\nimport { TbPinned, TbPinnedOff } from \"react-icons/tb\";\ninterface ICardProps {\n  id: string;\n  number: number;\n  content: string;\n  onDeleteCard: any;\n  onChangeContent: any;\n}\n\nconst defaultContent = {\n  type: \"record\",\n  text: \"\",\n  color: \"red\",\n  fixed: false,\n};\n\nconst Card: React.FC<ICardProps> = ({\n  id,\n  number,\n  content,\n  onDeleteCard,\n  onChangeContent,\n}: ICardProps) => {\n  const textRef = React.useRef<HTMLSpanElement>(null);\n\n  const objContent = isJsonString(content)\n    ? JSON.parse(content)\n    : { ...defaultContent, text: content };\n  return (\n    <CardContainer key={id} color={objContent.color}>\n      <div className=\"ContentContainer\">\n        <header>\n          <strong>\n            {objContent.fixed ? (\n              <TbPinnedOff size={24} />\n            ) : (\n              <TbPinned size={24} />\n            )}\n            {/* <input type={'checkbox'} checked={objContent.fixed} onChange={e => onChangeContent(id, JSON.stringify({...objContent, fixed: e.target.checked}))} /> */}\n            <select\n              value={objContent.type}\n              onChange={(e) =>\n                onChangeContent(\n                  id,\n                  JSON.stringify({ ...objContent, type: e.target.value })\n                )\n              }\n            >\n              <option value=\"note\">Note</option>\n              <option value=\"gratitude\">Gratitude</option>\n              <option value=\"journal\">Journal</option>\n            </select>\n            <strong>\n              {number}# {id}\n            </strong>\n          </strong>\n\n          <FiTrash2 onClick={(e) => onDeleteCard(id)}></FiTrash2>\n        </header>\n        <span\n          ref={textRef}\n          role=\"textbox\"\n          contentEditable\n          data-placeholder=\"What do you have for today?\"\n          onBlur={(e) =>\n            onChangeContent(\n              id,\n              JSON.stringify({ ...objContent, text: e.target.innerText })\n            )\n          }\n          suppressContentEditableWarning={true}\n        >\n          {objContent.text}\n        </span>\n      </div>\n    </CardContainer>\n  );\n};\n\nexport default Card;\n","import styled from \"styled-components\";\n\nexport const EntryList = styled.div`\n  width: 100%;\n  margin-top: 20px;\n`;\n","import React from \"react\";\nimport {\n  BodyContainer,\n  CustomButton,\n  DataContainer,\n} from \"../../styles/global\";\nimport Card from \"../../components/Card\";\nimport uuid from \"react-uuid\";\nimport { EntryList } from \"./styles\";\nimport { database } from \"../../services/firebase\";\nimport {\n  collection,\n  query,\n  where,\n  getDocs,\n  doc,\n  addDoc,\n  setDoc,\n  deleteDoc,\n} from \"firebase/firestore\";\nimport { UserAuth } from \"../../contexts/AuthContext\";\nimport { isJsonString } from \"../../utils\";\n\ninterface IEntry {\n  uid: string;\n  id: string;\n  content: string;\n  date: string;\n}\n\nconst Dashboard: React.FC = () => {\n  const [entries, setEntries] = React.useState<IEntry[]>([]);\n  const { user } = UserAuth();\n\n  const selectedDate = new Date().toISOString().split(\"T\")[0];\n  const [showAll, setShowAll] = React.useState<boolean>(false);\n\n  async function handleAddNewEntry(event: React.FormEvent<HTMLButtonElement>) {\n    const newEntry: IEntry = {\n      uid: user.uid,\n      id: uuid(),\n      content: \"\",\n      date: selectedDate,\n    };\n    const newEntries = [...entries, newEntry];\n    setEntries(newEntries);\n    const userDocRef = doc(database, \"users\", user.uid);\n    const entriesRef = collection(userDocRef, \"entries\");\n    await addDoc(entriesRef, newEntry);\n  }\n\n  async function fetchEntries() {\n    const userDocRef = doc(database, \"users\", user.uid);\n    const entriesRef = collection(userDocRef, \"entries\");\n    const querySnapshot = await getDocs(entriesRef);\n    const entries: IEntry[] = [];\n    querySnapshot.forEach((doc) => {\n      entries.push(doc.data() as IEntry);\n    });\n    setEntries(entries);\n  }\n\n  React.useEffect(() => {\n    fetchEntries();\n  }, []);\n\n  const handleDeleteEntry = async (id: string) => {\n    const newEntries = entries.filter((entry) => entry.id !== id);\n    setEntries(newEntries);\n\n    const userDocRef = doc(database, \"users\", user.uid);\n    const entriesRef = collection(userDocRef, \"entries\");\n    const userQuery = query(entriesRef, where(\"id\", \"==\", id));\n    const querySnapshot = await getDocs(userQuery);\n    querySnapshot.forEach((document) => {\n      deleteDoc(doc(database, `users/${user.uid}/entries`, document.id));\n    });\n  };\n\n  const handleChangeEntry = async (id: string, content: string) => {\n    const newEntries = entries.map((entry) => {\n      if (entry.id === id) {\n        entry.content = content;\n      }\n      return entry;\n    });\n    setEntries(newEntries);\n\n    const changedEntry = entries.find((entry) => entry.id === id);\n    if (changedEntry) {\n      changedEntry.content = content;\n      const userDocRef = doc(database, \"users\", user.uid);\n      const entriesRef = collection(userDocRef, \"entries\");\n      const userQuery = query(entriesRef, where(\"id\", \"==\", id));\n      const querySnapshot = await getDocs(userQuery);\n      querySnapshot.forEach((document) => {\n        setDoc(\n          doc(database, `users/${user.uid}/entries`, document.id),\n          changedEntry\n        );\n      });\n    }\n  };\n\n  let count = 0;\n  return (\n    <BodyContainer>\n      <DataContainer>\n        <EntryList>\n          {entries.map((entry, index) => {\n            console.log(entry);\n            return showAll ||\n              entry.date === selectedDate ||\n              (isJsonString(entry.content) &&\n                JSON.parse(entry.content).fixed === true) ? (\n              <Card\n                key={entry.id}\n                id={entry.id}\n                number={(count = count + 1)}\n                content={entry.content}\n                onDeleteCard={handleDeleteEntry}\n                onChangeContent={handleChangeEntry}\n              />\n            ) : (\n              <div key={entry.id}></div>\n            );\n          })}\n        </EntryList>\n        <CustomButton color=\"#04d361\" onClick={handleAddNewEntry}>\n          Add New\n        </CustomButton>\n      </DataContainer>\n    </BodyContainer>\n  );\n};\n\nexport default Dashboard;\n"],"names":["CardContainer","styled","isJsonString","myString","JSON","parse","e","defaultContent","type","text","color","fixed","id","number","content","onDeleteCard","onChangeContent","textRef","React","objContent","className","size","value","onChange","stringify","target","onClick","ref","role","contentEditable","onBlur","innerText","suppressContentEditableWarning","EntryList","entries","setEntries","user","UserAuth","selectedDate","Date","toISOString","split","showAll","event","newEntry","uid","uuid","date","newEntries","userDocRef","doc","database","entriesRef","collection","addDoc","getDocs","querySnapshot","forEach","push","data","fetchEntries","handleDeleteEntry","filter","entry","userQuery","query","where","document","deleteDoc","handleChangeEntry","map","changedEntry","find","setDoc","count","index","console","log"],"sourceRoot":""}