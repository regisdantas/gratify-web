"use strict";(self.webpackChunkgratify_journaling=self.webpackChunkgratify_journaling||[]).push([[945],{701:(n,e,t)=>{t.r(e),t.d(e,{default:()=>U});var i,r,o=t(43),a=t(293),l=t(555),s=t(528),d=t(574);d.Ay.h1(i||(i=(0,s.A)(["\n  font-size: 36px;\n  color: #3a3a3a;\n"])));const c=d.Ay.div(r||(r=(0,s.A)(["\n  /* max-width: 400px; */\n  width: 100%;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  padding: 0px;\n  margin: 10px 0px 0px 0px;\n\n  background-color: #eee;\n  border-radius: 5px;\n  border-left: 3px dashed lightgray;\n\n  div {\n    margin-left: 10px;\n    width: 100%;\n  }\n\n  .ContentContainer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    width: 100%;\n    border-radius: 5px 5px 0px 0px;\n    margin: 0;\n    background: #fff;\n\n    header {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n\n      svg {\n        margin: 10px;\n        cursor: pointer;\n      }\n    }\n\n    span {\n      display: flex;\n      padding: 0;\n      margin: 0;\n      gap: 5px;\n      align-items: center;\n    }\n    input,\n    select {\n      width: fit-content;\n      margin: 0px;\n      height: 30px;\n      color: black;\n      border: none;\n    }\n\n    strong {\n      color: darkgray;\n      width: 100%;\n      display: flex;\n      gap: 10px;\n      align-items: center;\n    }\n\n    span {\n      border: 0px;\n      padding: 10px;\n      width: 100%;\n      text-align: justify;\n    }\n\n    span:empty::before {\n      content: attr(data-placeholder);\n      color: lightgray;\n    }\n\n    span:focus {\n      outline: none;\n    }\n\n    .ActionContainer {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-around;\n      margin: 4px;\n      p {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        * {\n          margin-right: 5px;\n        }\n      }\n    }\n  }\n  .ContentContainer .date {\n    width: auto;\n    align-self: flex-end;\n    padding: 4px 10px 4px 10px;\n    color: gray;\n    align-items: flex-end;\n  }\n"])));var p=t(9);const u=n=>{try{JSON.parse(n)}catch(e){return!1}return!0},x=n=>{const e=n.split("-");return 3!==e.length?n:"".concat(e[2],"/").concat(e[1],"/").concat(e[0])};var g=t(966),h=t(579);const f={title:"",type:"record",text:"",color:"red",pinned:!1},y=n=>{let{id:e,number:t,date:i,content:r,onDeleteCard:a,onChangeContent:s}=n;const d=o.useRef(null),y=o.useRef(null),m=u(r)?JSON.parse(r):(0,l.A)((0,l.A)({},f),{},{text:r});return(0,h.jsx)(c,{color:m.color,children:(0,h.jsxs)("div",{className:"ContentContainer",children:[(0,h.jsxs)("header",{children:[(0,h.jsxs)("strong",{children:[m.pinned?(0,h.jsx)(g.eZN,{title:"Unpin note",size:24,onClick:()=>s(e,JSON.stringify((0,l.A)((0,l.A)({},m),{},{pinned:!1})))}):(0,h.jsx)(g.xi4,{title:"Pin note",size:24,onClick:()=>s(e,JSON.stringify((0,l.A)((0,l.A)({},m),{},{pinned:!0})))}),(0,h.jsxs)("select",{title:"Note type",value:m.type,onChange:n=>s(e,JSON.stringify((0,l.A)((0,l.A)({},m),{},{type:n.target.value}))),children:[(0,h.jsx)("option",{value:"note",children:"\ud83d\udcdd"}),(0,h.jsx)("option",{value:"gratitude",children:"\ud83d\ude4f"}),(0,h.jsx)("option",{value:"journal",children:"\ud83d\udcd3"})]}),(0,h.jsx)("strong",{children:(0,h.jsx)("span",{title:"Note name",ref:y,role:"textbox",contentEditable:!0,"data-placeholder":"Give me a name",onBlur:n=>s(e,JSON.stringify((0,l.A)((0,l.A)({},m),{},{title:n.target.innerText}))),children:m.title})})]}),(0,h.jsx)(p.IXo,{title:"Delete note",onClick:n=>a(e)})]}),(0,h.jsx)("span",{title:"Note content",ref:d,role:"textbox",contentEditable:!0,"data-placeholder":"What do you have for today?",onBlur:n=>s(e,JSON.stringify((0,l.A)((0,l.A)({},m),{},{text:n.target.innerText}))),suppressContentEditableWarning:!0,children:m.text}),(0,h.jsx)("span",{className:"date",children:x(i)})]})},e)};var m,A,j,w=t(222),v=t.n(w);const b=d.Ay.div(m||(m=(0,s.A)(["\n  width: 100%;\n  margin-top: 20px;\n  padding-bottom: 60px;\n"]))),C=d.Ay.div(A||(A=(0,s.A)(["\nposition: relative;\nbottom: 0px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  align-self: flex-end;\n  margin: 0px;\n  height: 35px;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  background: #e0e0e5;\n  svg {\n    cursor: pointer;\n    margin: 0 10px 0 10px;\n    width: 20px;\n  }\n  input {\n    background: transparent;\n    height: auto;\n    border: none;\n  }\n"]))),O=d.Ay.div(j||(j=(0,s.A)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100px;\n"])));var k=t(286),S=t(667),N=t(66),J=t(952),D=t(950);const R=n=>{let{children:e}=n;const t=document.getElementById("header-portal");return t?(0,D.createPortal)(e,t):null},E=t.p+"static/media/user.ae3a914be1e9f200b221.png",U=()=>{const{selectedDate:n,setSelectedDate:e,showAll:t,setShowAll:i}=(0,J.M)(),[r,l]=o.useState([]),{user:s,logOut:d}=(0,N.o)(),c=(new Date).toISOString().split("T")[0],x=o.useRef(null),g=t=>{const i=new Date(n);i.setDate(i.getDate()+t);const r=i.toISOString().split("T")[0];e(r),null!==x&&null!==x.current&&(x.current.value=r)};o.useEffect(()=>{!async function(){const n=(0,S.H9)(k.OO,"users",s.uid),e=(0,S.rJ)(n,"entries"),t=await(0,S.GG)(e),i=[];t.forEach(n=>{let e=n.data();e.createdAt||(e.createdAt=e.date),i.push(e)}),i.sort((n,e)=>n.date>e.date?-1:n.date<e.date?1:n.createdAt>e.createdAt?-1:n.createdAt<e.createdAt?1:0),l(i)}()},[]);const f=()=>{window.scrollTo({top:0,behavior:"smooth"})},m=async n=>{const e=r.filter(e=>e.id!==n);l(e);const t=(0,S.H9)(k.OO,"users",s.uid),i=(0,S.rJ)(t,"entries"),o=(0,S.P)(i,(0,S._M)("id","==",n));(await(0,S.GG)(o)).forEach(n=>{(0,S.kd)((0,S.H9)(k.OO,"users/".concat(s.uid,"/entries"),n.id))})},A=async(n,e)=>{const t=r.map(t=>(t.id===n&&(t.content=e),t));l(t);const i=r.find(e=>e.id===n);if(i){i.content=e;const t=(0,S.H9)(k.OO,"users",s.uid),r=(0,S.rJ)(t,"entries"),o=(0,S.P)(r,(0,S._M)("id","==",n));(await(0,S.GG)(o)).forEach(n=>{(0,S.BN)((0,S.H9)(k.OO,"users/".concat(s.uid,"/entries"),n.id),i)})}};let j=0;return(0,h.jsxs)(a.Mt,{children:[(0,h.jsxs)(R,{children:[null!==s&&void 0!==s.displayName&&null!==s.photoURL&&void 0!==s.photoURL?(0,h.jsxs)(C,{children:[(0,h.jsx)(p.kRp,{title:"Previous day",size:36,onClick:()=>g(-1)}),(0,h.jsx)("input",{title:"Select date",ref:x,type:"date",defaultValue:c,onChange:n=>{e(n.target.value)}}),(0,h.jsx)(p.dyV,{title:"Next day",size:36,onClick:()=>g(1)}),t?(0,h.jsx)(p._NO,{title:"Show only selected day",size:36,onClick:()=>i(!1)}):(0,h.jsx)(p.Vap,{title:"Show all notes",size:36,onClick:()=>i(!0)})]}):null,null!==s&&void 0!==s.displayName&&null!==s.photoURL&&void 0!==s.photoURL?(0,h.jsx)(O,{children:(0,h.jsx)("img",{title:"Logout",src:s.photoURL?s.photoURL:E,onError:n=>{let{currentTarget:e}=n;e.onerror=null,e.src=E},alt:"User photograph",onClick:()=>(async()=>{try{await d()}catch(n){console.log(n)}})()})}):null]}),(0,h.jsxs)(a.A9,{children:[(0,h.jsx)(b,{children:r.map((e,i)=>t||e.date===n||u(e.content)&&!0===JSON.parse(e.content).pinned?(0,h.jsx)(y,{id:e.id,date:e.date,number:j+=1,content:e.content,onDeleteCard:m,onChangeContent:A},e.id):(0,h.jsx)("div",{},e.id))}),(0,h.jsx)(a.ru,{title:"Add new note",color:"#04d361",onClick:async function(e){const t={uid:s.uid,id:v()(),content:"",date:n,createdAt:(new Date).toISOString()};f();const i=[...r,t];i.sort((n,e)=>n.date>e.date?-1:n.date<e.date?1:n.createdAt>e.createdAt?-1:n.createdAt<e.createdAt?1:0),l(i);const o=(0,S.H9)(k.OO,"users",s.uid),a=(0,S.rJ)(o,"entries");await(0,S.gS)(a,t)},children:"+"})]})]})}}}]);
//# sourceMappingURL=dashboard.55e64439.chunk.js.map