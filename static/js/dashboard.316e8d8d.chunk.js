"use strict";(self.webpackChunkgratify_journaling=self.webpackChunkgratify_journaling||[]).push([[945],{101:(n,e,t)=>{t.r(e),t.d(e,{default:()=>S});var r,i,s=t(43),a=t(293),o=t(555),d=t(528),c=t(574);c.Ay.h1(r||(r=(0,d.A)(["\n  font-size: 36px;\n  color: #3a3a3a;\n"])));const l=c.Ay.div(i||(i=(0,d.A)(["\n  /* max-width: 400px; */\n  width: 100%;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  padding: 0px;\n  margin: 10px 0px 0px 0px;\n\n  background-color: #eee;\n  border-radius: 5px;\n  border-left: 3px dashed lightgray;\n\n  div {\n    margin-left: 10px;\n    width: 100%;\n  }\n\n  .ContentContainer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    width: 100%;\n    border-radius: 5px 5px 0px 0px;\n    margin: 0;\n    background: #fff;\n\n    header {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n\n      svg {\n        margin: 10px;\n        cursor: pointer;\n      }\n    }\n\n    span {\n      display: flex;\n      padding: 0;\n      margin: 0;\n      gap: 5px;\n      align-items: center;\n    }\n    input,\n    select {\n      width: fit-content;\n      margin: 0px;\n      height: 30px;\n      color: black;\n      border: none;\n    }\n\n    strong {\n      color: darkgray;\n      width: 100%;\n      display: flex;\n      gap: 10px;\n      align-items: center;\n    }\n\n    span {\n      border: 0px;\n      padding: 10px;\n      width: 100%;\n      text-align: justify;\n    }\n\n    span:empty::before {\n      content: attr(data-placeholder);\n      color: lightgray;\n    }\n\n    span:focus {\n      outline: none;\n    }\n\n    .ActionContainer {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-around;\n      margin: 4px;\n      p {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        * {\n          margin-right: 5px;\n        }\n      }\n    }\n  }\n"])));var x=t(9);const p=n=>{try{JSON.parse(n)}catch(e){return!1}return!0};var u=t(966),h=t(579);const g={type:"record",text:"",color:"red",fixed:!1},f=n=>{let{id:e,number:t,content:r,onDeleteCard:i,onChangeContent:a}=n;const d=s.useRef(null),c=p(r)?JSON.parse(r):(0,o.A)((0,o.A)({},g),{},{text:r});return(0,h.jsx)(l,{color:c.color,children:(0,h.jsxs)("div",{className:"ContentContainer",children:[(0,h.jsxs)("header",{children:[(0,h.jsxs)("strong",{children:[c.fixed?(0,h.jsx)(u.eZN,{size:24}):(0,h.jsx)(u.xi4,{size:24}),(0,h.jsxs)("select",{value:c.type,onChange:n=>a(e,JSON.stringify((0,o.A)((0,o.A)({},c),{},{type:n.target.value}))),children:[(0,h.jsx)("option",{value:"note",children:"Note"}),(0,h.jsx)("option",{value:"gratitude",children:"Gratitude"}),(0,h.jsx)("option",{value:"journal",children:"Journal"})]}),(0,h.jsxs)("strong",{children:[t,"# ",e]})]}),(0,h.jsx)(x.IXo,{onClick:n=>i(e)})]}),(0,h.jsx)("span",{ref:d,role:"textbox",contentEditable:!0,"data-placeholder":"What do you have for today?",onBlur:n=>a(e,JSON.stringify((0,o.A)((0,o.A)({},c),{},{text:n.target.innerText}))),suppressContentEditableWarning:!0,children:c.text})]})},e)};var y,j=t(222),w=t.n(j);const m=c.Ay.div(y||(y=(0,d.A)(["\n  width: 100%;\n  margin-top: 20px;\n"])));var v=t(286),A=t(667),C=t(66);const O=(0,s.createContext)({}),b=n=>{let{children:e}=n;const[t,r]=(0,s.useState)(!0),[i,a]=(0,s.useState)((new Date).toISOString().split("T")[0]);return(0,h.jsx)(O.Provider,{value:{showAll:t,setShowAll:r,selectedDate:i,setSelectedDate:a},children:e})},S=()=>{const{selectedDate:n,setSelectedDate:e,showAll:t,setShowAll:r}=(0,s.useContext)(O),[i,o]=s.useState([]),{user:d}=(0,C.o)();s.useEffect(()=>{!async function(){const n=(0,A.H9)(v.OO,"users",d.uid),e=(0,A.rJ)(n,"entries"),t=await(0,A.GG)(e),r=[];t.forEach(n=>{r.push(n.data())}),o(r)}()},[]);const c=async n=>{const e=i.filter(e=>e.id!==n);o(e);const t=(0,A.H9)(v.OO,"users",d.uid),r=(0,A.rJ)(t,"entries"),s=(0,A.P)(r,(0,A._M)("id","==",n));(await(0,A.GG)(s)).forEach(n=>{(0,A.kd)((0,A.H9)(v.OO,"users/".concat(d.uid,"/entries"),n.id))})},l=async(n,e)=>{const t=i.map(t=>(t.id===n&&(t.content=e),t));o(t);const r=i.find(e=>e.id===n);if(r){r.content=e;const t=(0,A.H9)(v.OO,"users",d.uid),i=(0,A.rJ)(t,"entries"),s=(0,A.P)(i,(0,A._M)("id","==",n));(await(0,A.GG)(s)).forEach(n=>{(0,A.BN)((0,A.H9)(v.OO,"users/".concat(d.uid,"/entries"),n.id),r)})}};let x=0;return(0,h.jsx)(b,{children:(0,h.jsx)(a.Mt,{children:(0,h.jsxs)(a.A9,{children:[(0,h.jsx)(m,{children:i.map((e,r)=>t||e.date===n||p(e.content)&&!0===JSON.parse(e.content).fixed?(0,h.jsx)(f,{id:e.id,number:x+=1,content:e.content,onDeleteCard:c,onChangeContent:l},e.id):(0,h.jsx)("div",{},e.id))}),(0,h.jsx)(a.Sv,{color:"#04d361",onClick:async function(e){const t={uid:d.uid,id:w()(),content:"",date:n},r=[...i,t];o(r);const s=(0,A.H9)(v.OO,"users",d.uid),a=(0,A.rJ)(s,"entries");await(0,A.gS)(a,t)},children:"Add New"})]})})})}}}]);
//# sourceMappingURL=dashboard.316e8d8d.chunk.js.map