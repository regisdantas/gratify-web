"use strict";(self.webpackChunkgratify_journaling=self.webpackChunkgratify_journaling||[]).push([[945],{701:(n,e,t)=>{t.r(e),t.d(e,{default:()=>D});var i,r,o=t(43),a=t(293),s=t(555),l=t(528),d=t(574);d.Ay.h1(i||(i=(0,l.A)(["\n  font-size: 36px;\n  color: #3a3a3a;\n"])));const c=d.Ay.div(r||(r=(0,l.A)(["\n  /* max-width: 400px; */\n  width: 100%;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  padding: 0px;\n  margin: 10px 0px 0px 0px;\n\n  background-color: #eee;\n  border-radius: 5px;\n  border-left: 3px dashed lightgray;\n\n  div {\n    margin-left: 10px;\n    width: 100%;\n  }\n\n  .ContentContainer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    width: 100%;\n    border-radius: 5px 5px 0px 0px;\n    margin: 0;\n    background: #fff;\n\n    header {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n\n      svg {\n        margin: 10px;\n        cursor: pointer;\n      }\n    }\n\n    span {\n      display: flex;\n      padding: 0;\n      margin: 0;\n      gap: 5px;\n      align-items: center;\n    }\n    input,\n    select {\n      width: fit-content;\n      margin: 0px;\n      height: 30px;\n      color: black;\n      border: none;\n    }\n\n    strong {\n      color: darkgray;\n      width: 100%;\n      display: flex;\n      gap: 10px;\n      align-items: center;\n    }\n\n    span {\n      border: 0px;\n      padding: 10px;\n      width: 100%;\n      text-align: justify;\n    }\n\n    span:empty::before {\n      content: attr(data-placeholder);\n      color: lightgray;\n    }\n\n    span:focus {\n      outline: none;\n    }\n\n    .ActionContainer {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-around;\n      margin: 4px;\n      p {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        * {\n          margin-right: 5px;\n        }\n      }\n    }\n  }\n"])));var p=t(9);const u=n=>{try{JSON.parse(n)}catch(e){return!1}return!0};var x=t(966),g=t(579);const h={title:"",type:"record",text:"",color:"red",pinned:!1},f=n=>{let{id:e,number:t,content:i,onDeleteCard:r,onChangeContent:a}=n;const l=o.useRef(null),d=o.useRef(null),f=u(i)?JSON.parse(i):(0,s.A)((0,s.A)({},h),{},{text:i});return(0,g.jsx)(c,{color:f.color,children:(0,g.jsxs)("div",{className:"ContentContainer",children:[(0,g.jsxs)("header",{children:[(0,g.jsxs)("strong",{children:[f.pinned?(0,g.jsx)(x.eZN,{size:24,onClick:()=>a(e,JSON.stringify((0,s.A)((0,s.A)({},f),{},{pinned:!1})))}):(0,g.jsx)(x.xi4,{size:24,onClick:()=>a(e,JSON.stringify((0,s.A)((0,s.A)({},f),{},{pinned:!0})))}),(0,g.jsxs)("select",{value:f.type,onChange:n=>a(e,JSON.stringify((0,s.A)((0,s.A)({},f),{},{type:n.target.value}))),children:[(0,g.jsx)("option",{value:"note",children:"Note"}),(0,g.jsx)("option",{value:"gratitude",children:"Gratitude"}),(0,g.jsx)("option",{value:"journal",children:"Journal"})]}),(0,g.jsxs)("strong",{children:[t,"#",(0,g.jsx)("span",{ref:d,role:"textbox",contentEditable:!0,"data-placeholder":"Give me a name",onBlur:n=>a(e,JSON.stringify((0,s.A)((0,s.A)({},f),{},{title:n.target.innerText}))),children:f.title})]})]}),(0,g.jsx)(p.IXo,{onClick:n=>r(e)})]}),(0,g.jsx)("span",{ref:l,role:"textbox",contentEditable:!0,"data-placeholder":"What do you have for today?",onBlur:n=>a(e,JSON.stringify((0,s.A)((0,s.A)({},f),{},{text:n.target.innerText}))),suppressContentEditableWarning:!0,children:f.text})]})},e)};var y,j,m,w=t(222),v=t.n(w);const A=d.Ay.div(y||(y=(0,l.A)(["\n  width: 100%;\n  margin-top: 20px;\n"]))),b=d.Ay.div(j||(j=(0,l.A)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  align-self: flex-end;\n  margin: 0px;\n  height: 35px;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  background: #e0e0e5;\n  svg {\n    cursor: pointer;\n    margin: 0 10px 0 10px;\n    width: 20px;\n  }\n  input {\n    background: transparent;\n    height: auto;\n    border: none;\n  }\n"]))),C=d.Ay.div(m||(m=(0,l.A)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100px;\n"])));var O=t(286),k=t(667),S=t(66),N=t(952),J=t(950);const R=n=>{let{children:e}=n;const t=document.getElementById("header-portal");return t?(0,J.createPortal)(e,t):null},E=t.p+"static/media/user.ae3a914be1e9f200b221.png",D=()=>{const{selectedDate:n,setSelectedDate:e,showAll:t,setShowAll:i}=(0,N.M)(),[r,s]=o.useState([]),{user:l,logOut:d}=(0,S.o)(),c=(new Date).toISOString().split("T")[0],x=o.useRef(null),h=t=>{const i=new Date(n);i.setDate(i.getDate()+t);const r=i.toISOString().split("T")[0];e(r),null!==x&&null!==x.current&&(x.current.value=r)};o.useEffect(()=>{!async function(){const n=(0,k.H9)(O.OO,"users",l.uid),e=(0,k.rJ)(n,"entries"),t=await(0,k.GG)(e),i=[];t.forEach(n=>{i.push(n.data())}),s(i)}()},[]);const y=async n=>{const e=r.filter(e=>e.id!==n);s(e);const t=(0,k.H9)(O.OO,"users",l.uid),i=(0,k.rJ)(t,"entries"),o=(0,k.P)(i,(0,k._M)("id","==",n));(await(0,k.GG)(o)).forEach(n=>{(0,k.kd)((0,k.H9)(O.OO,"users/".concat(l.uid,"/entries"),n.id))})},j=async(n,e)=>{console.log("changed",n,e);const t=r.map(t=>(t.id===n&&(t.content=e),t));s(t);const i=r.find(e=>e.id===n);if(i){i.content=e;const t=(0,k.H9)(O.OO,"users",l.uid),r=(0,k.rJ)(t,"entries"),o=(0,k.P)(r,(0,k._M)("id","==",n));(await(0,k.GG)(o)).forEach(n=>{(0,k.BN)((0,k.H9)(O.OO,"users/".concat(l.uid,"/entries"),n.id),i)})}};let m=0;return(0,g.jsxs)(a.Mt,{children:[(0,g.jsxs)(R,{children:[null!==l&&void 0!==l.displayName&&null!==l.photoURL&&void 0!==l.photoURL?(0,g.jsxs)(b,{children:[(0,g.jsx)(p.kRp,{size:36,onClick:()=>h(-1)}),(0,g.jsx)("input",{ref:x,type:"date",defaultValue:c,onChange:n=>{e(n.target.value)}}),(0,g.jsx)(p.dyV,{size:36,onClick:()=>h(1)}),t?(0,g.jsx)(p._NO,{size:36,onClick:()=>i(!1)}):(0,g.jsx)(p.Vap,{size:36,onClick:()=>i(!0)})]}):null,null!==l&&void 0!==l.displayName&&null!==l.photoURL&&void 0!==l.photoURL?(0,g.jsx)(C,{children:(0,g.jsx)("img",{src:l.photoURL?l.photoURL:E,onError:n=>{let{currentTarget:e}=n;e.onerror=null,e.src=E},alt:"User photograph",onClick:()=>(async()=>{try{await d()}catch(n){console.log(n)}})()})}):null]}),(0,g.jsxs)(a.A9,{children:[(0,g.jsx)(A,{children:r.map((e,i)=>t||e.date===n||u(e.content)&&!0===JSON.parse(e.content).pinned?(0,g.jsx)(f,{id:e.id,number:m+=1,content:e.content,onDeleteCard:y,onChangeContent:j},e.id):(0,g.jsx)("div",{},e.id))}),(0,g.jsx)(a.Sv,{color:"#04d361",onClick:async function(e){const t={uid:l.uid,id:v()(),content:"",date:n},i=[...r,t];s(i);const o=(0,k.H9)(O.OO,"users",l.uid),a=(0,k.rJ)(o,"entries");await(0,k.gS)(a,t)},children:"Add New"})]})]})}}}]);
//# sourceMappingURL=dashboard.9ae540bc.chunk.js.map